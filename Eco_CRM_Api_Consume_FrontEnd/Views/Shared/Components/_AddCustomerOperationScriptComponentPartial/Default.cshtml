<script>
    $(document).ready(function () {
        // Firma Dropdown'u doldur
        $.ajax({
            url: 'https://localhost:44309/api/Customers',
            method: 'GET',
            headers: {
                'Authorization': 'Bearer ' + sessionStorage.getItem('Token')
            },
            success: function (data) {
                var dropdownList = $('#dropdownList');
                data.forEach(function (customer) {
                    dropdownList.append(`<div class="dropdown-item" data-value="${customer.id}">${customer.companyName}</div>`);
                });

                // Firma Dropdown
                $('#customDropdown').on('click', function () {
                    $('#dropdownList').toggle();
                });

                $('#dropdownList').on('click', '.dropdown-item', function () {
                    const selectedText = $(this).text();
                    const selectedValue = $(this).data('value');
                    $('#customDropdown').text(selectedText);
                    $('#dropdownList').hide();
                    $('input[name="OperationRequest.CustomerId"]').val(selectedValue);
                });
            },
            error: function () {
                alert('Firmalar alınırken hata oluştu.');
            }
        });

        // Yöntem Dropdown
        $('#methodDropdown').on('click', function () {
            $('#methodDropdownList').toggle();
        });
        $('#methodDropdownList').on('click', '.dropdown-item', function () {
            const selectedText = $(this).text();
            const selectedValue = $(this).data('value');
            $('#methodDropdown').text(selectedText);
            $('#methodDropdownList').hide();
            $('input[name="OperationRequest.Method"]').val(selectedValue);
        });

        // Yeni Mi Dropdown
        $('#isNewDropdown').on('click', function () {
            $('#isNewDropdownList').toggle();
        });
        $('#isNewDropdownList').on('click', '.dropdown-item', function () {
            const selectedText = $(this).text();
            const selectedValue = $(this).data('value');
            $('#isNewDropdown').text(selectedText);
            $('#isNewDropdownList').hide();
            $('input[name="OperationRequest.IsNew"]').val(selectedValue);
        });

        // Sebep Dropdown
        $('#reasonDropdown').on('click', function () {
            $('#reasonDropdownList').toggle();
        });
        $('#reasonDropdownList').on('click', '.dropdown-item', function () {
            const selectedText = $(this).text();
            const selectedValue = $(this).data('value');
            $('#reasonDropdown').text(selectedText);
            $('#reasonDropdownList').hide();
            $('input[name="OperationRequest.Reason"]').val(selectedValue);
        });

        // Form gönderildiğinde verilerin backend'e aktarıldığını kontrol etmek için
        $('#operationForm').submit(function (event) {
            console.log('Form verileri:', $(this).serialize());
        });
    });


</script>